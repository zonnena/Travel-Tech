---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - css/style.css
  - js/app.js
autonomous: false

must_haves:
  truths:
    - "Opening the app shows a dark-themed map centered on the user's GPS location"
    - "The map uses CartoDB dark tiles matching the overall dark aesthetic"
    - "Neon accent colors (cyan, magenta, purple) are visible in the UI shell"
    - "Typography is clean and modern (Space Grotesk / Inter from Google Fonts)"
    - "The layout looks correct on both a phone-width screen and a desktop browser"
    - "A pulsing marker indicates the user's current position on the map"
  artifacts:
    - path: "index.html"
      provides: "App shell with Leaflet map container, CDN imports, responsive meta tag"
      min_lines: 40
    - path: "css/style.css"
      provides: "Dark theme, neon accents, glow effects, responsive breakpoints, Gen-Z typography"
      min_lines: 80
    - path: "js/app.js"
      provides: "Leaflet map initialization, GPS geolocation, user position marker"
      min_lines: 30
  key_links:
    - from: "index.html"
      to: "css/style.css"
      via: "link stylesheet"
      pattern: "style\\.css"
    - from: "index.html"
      to: "js/app.js"
      via: "script src"
      pattern: "app\\.js"
    - from: "js/app.js"
      to: "Leaflet L.map"
      via: "map initialization on #map element"
      pattern: "L\\.map\\("
    - from: "js/app.js"
      to: "navigator.geolocation"
      via: "GPS positioning"
      pattern: "navigator\\.geolocation"
---

<objective>
Create the complete app shell: project scaffolding, Leaflet map with dark CartoDB tiles, GPS-based centering, and a dark neon-accented Gen-Z UI theme that is fully responsive.

Purpose: This is the foundation every subsequent phase builds on. The map, the GPS, and the visual identity must all be solid before adding navigator controls or AI content.
Output: Three files (index.html, css/style.css, js/app.js) that form a working app you can open in any browser.
</objective>

<execution_context>
@C:\Users\Admin\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Admin\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create app shell with Leaflet map and GPS positioning</name>
  <files>index.html, js/app.js</files>
  <action>
Create project scaffolding with these exact files:

**index.html** — The single HTML page:
- DOCTYPE html with lang="en"
- Meta viewport tag for mobile: `<meta name="viewport" content="width=device-width, initial-scale=1.0">`
- Title: "GeoLayers — Explore Your World"
- Google Fonts CDN: load "Inter" (weights 400, 500, 600) and "Space Grotesk" (weights 500, 700)
- Leaflet CSS CDN: `https://unpkg.com/leaflet@1.9.4/dist/leaflet.css`
- Link to `css/style.css`
- Body contains:
  - A header/top bar with app name "GeoLayers" and a small tagline "Discover layers of history beneath your feet"
  - A `<div id="map"></div>` that fills the remaining viewport height
  - A small floating status pill (bottom-center) showing GPS status text like "Locating..." or coordinates
- Leaflet JS CDN: `https://unpkg.com/leaflet@1.9.4/dist/leaflet.js`
- Script src to `js/app.js`

**js/app.js** — Map initialization and GPS:
- Initialize Leaflet map on `#map` element
- Use CartoDB dark_all tile layer: `https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png` with attribution
- Default center: Tel Aviv [32.0853, 34.7818] at zoom 15 (used if GPS is denied)
- Call `navigator.geolocation.getCurrentPosition()`:
  - On success: fly map to user coords, place a custom pulsing marker (use a div icon with CSS class `user-marker`), update status pill to show "GPS Active"
  - On error: keep default center, update status pill to "GPS unavailable — showing Tel Aviv"
- Also call `navigator.geolocation.watchPosition()` to update marker position as user moves
- The pulsing marker should use `L.divIcon` with className `user-marker` (styled in CSS)
  </action>
  <verify>
Open index.html in a browser (or via a local server like `python -m http.server`). Confirm:
1. The page loads without console errors
2. A dark map appears filling the viewport below the header
3. Browser prompts for location permission
4. If permission granted, map centers on user's location with a visible marker
5. If permission denied, map shows Tel Aviv with a status message
  </verify>
  <done>Leaflet map renders with dark CartoDB tiles, GPS geolocation works, user position marker visible, status pill shows GPS state</done>
</task>

<task type="auto">
  <name>Task 2: Dark neon theme, Gen-Z typography, glow effects, and responsive layout</name>
  <files>css/style.css</files>
  <action>
Create `css/style.css` with a complete dark neon Gen-Z aesthetic:

**CSS Custom Properties (root variables):**
- `--bg-primary: #0a0a0f` (near-black)
- `--bg-secondary: #12121a` (dark card background)
- `--bg-surface: #1a1a2e` (elevated surface)
- `--neon-cyan: #00f0ff`
- `--neon-magenta: #ff00aa`
- `--neon-purple: #8b5cf6`
- `--text-primary: #f0f0f0`
- `--text-secondary: #a0a0b0`
- `--font-display: 'Space Grotesk', sans-serif`
- `--font-body: 'Inter', sans-serif`

**Global reset and base:**
- `*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }`
- `html, body { height: 100%; background: var(--bg-primary); color: var(--text-primary); font-family: var(--font-body); overflow: hidden; }`

**Header/top bar:**
- Fixed at top, full width, height ~56px
- Background: `var(--bg-secondary)` with slight transparency (rgba) and `backdrop-filter: blur(10px)`
- Bottom border: 1px solid with neon cyan at low opacity
- App name styled with `var(--font-display)`, font-weight 700, with a subtle `text-shadow` glow using `var(--neon-cyan)`
- Tagline in `var(--text-secondary)`, smaller font size
- z-index above the map (1000+)

**Map container (#map):**
- Position absolute, top: 56px (below header), bottom: 0, left: 0, right: 0
- This makes the map fill all remaining space

**User marker (pulsing dot):**
- `.user-marker`: 16px circle, background `var(--neon-cyan)`, border-radius 50%, box-shadow with neon cyan glow
- CSS animation `pulse` using keyframes: scale from 1 to 1.5, opacity from 0.8 to 0, creating a pulsing ring effect
- Use a `::before` pseudo-element for the pulse ring (larger, semi-transparent)

**Status pill:**
- Fixed position, bottom 20px, left 50%, transform translateX(-50%)
- Background: `var(--bg-surface)` with 90% opacity, border-radius 20px
- Small padding, font-size 12px, border: 1px solid neon purple at low opacity
- z-index above map

**Glow utility classes (for future use):**
- `.glow-cyan { box-shadow: 0 0 15px var(--neon-cyan), 0 0 30px rgba(0,240,255,0.3); }`
- `.glow-magenta { box-shadow: 0 0 15px var(--neon-magenta), 0 0 30px rgba(255,0,170,0.3); }`
- `.glow-purple { box-shadow: 0 0 15px var(--neon-purple), 0 0 30px rgba(139,92,246,0.3); }`

**Responsive:**
- Mobile-first. On screens <= 480px: header height ~48px, smaller font sizes, map top adjusts
- On desktop (>= 1024px): optionally larger header font, same layout structure (map fills space)
- No horizontal scroll, no overflow issues

**Leaflet overrides:**
- `.leaflet-control-attribution { background: rgba(10,10,15,0.8) !important; color: var(--text-secondary) !important; font-size: 10px !important; }`
- `.leaflet-control-zoom a { background: var(--bg-surface) !important; color: var(--neon-cyan) !important; border-color: rgba(0,240,255,0.2) !important; }`
  </action>
  <verify>
Open the app and verify:
1. Background is very dark (near-black), not default white
2. Header has a subtle glow/neon accent on the app name
3. The user marker pulses with a cyan glow animation
4. Resize browser window from phone-width (~375px) to desktop (~1200px) — layout never breaks, no horizontal scrollbar, map always fills space
5. Typography uses Space Grotesk for headings, Inter for body text
6. Leaflet zoom controls and attribution match the dark theme
  </verify>
  <done>Dark neon theme applied with CSS variables, glow effects, pulsing user marker, responsive layout works from 375px to 1440px+, Gen-Z typography loaded and applied</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 1 foundation: dark-themed Leaflet map with GPS positioning, neon Gen-Z aesthetic, and responsive layout</what-built>
  <how-to-verify>
1. Open the app in your phone browser (serve via `python -m http.server 8000` or VS Code Live Server, access via local network IP)
2. Confirm: dark map loads, location permission prompt appears
3. Grant location — map should center on your position with a pulsing cyan dot
4. Check the header: "GeoLayers" text with subtle neon glow
5. Check the status pill at the bottom shows GPS state
6. Open on desktop browser — same layout, map fills the space, no broken elements
7. Resize desktop browser to phone width — layout should adapt smoothly
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Phase 1 success checks:
1. `index.html` loads in browser without errors (check DevTools console)
2. Map renders with dark tiles (not default bright OSM tiles)
3. GPS geolocation prompts and works when allowed
4. User position marker is visible and pulsing
5. Layout is responsive: works at 375px width (phone) and 1440px width (desktop)
6. Dark theme with neon accents is visually present
7. Fonts load correctly from Google Fonts CDN
</verification>

<success_criteria>
- Opening the app on a phone browser shows a Leaflet + OpenStreetMap (CartoDB dark) map centered on the user's GPS location
- The app has a dark background (#0a0a0f) with neon accent colors (cyan, magenta, purple) and Space Grotesk / Inter typography
- The layout adapts between mobile phone and desktop browser without breaking
- A pulsing cyan marker shows the user's current position
- All three requirements (MAP-01, UI-01, UI-02, UI-03) are satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
